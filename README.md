# PerParson CRM System

##### [Development Board](https://app.gitkraken.com/glo/board/X15Psj2bBQARvb0o)

## Local Development
PerParson works with [Homestead](https://laravel.com/docs/8.x/homestead) to run the MariaDB/MySQL instance.

Please make sure you have run `composer install` and `npm install` to bring dependencies in.

Initialise Homestead
```bash
php vendor/bin/homestead make
```

To run local development just invoke serve command with laravel CLI.  
```bash
php artisan serve
```

To get the enviroment working please copy `.env.example` into `.env` and fill the database information

## Migrations
Please execute those commands to create all needed tables to run the application.

***PerParson Tables***
```bash
php artisan migrate
```

***Passport Tables/Installation***
```bash
php artisan passport:install
```

## Testing Env
All testing `env` are kept in `.env.testing`. So make sure that the database information are correct.
If you do not have `.env.testing` file please create one from `.env.example` and remove local variables from it. 

#### Migration and Seeding of Testing 
A migration and database seeding can be accomplished with simple `artisan` commands
by passing `--env` flag we ensure that the correct database will be seeded and migrated.

***Running `php artisan test` should run those commands at the beginning of the tests***

```bash
php artisan migrate --env=testing
php artisan db:seed --env=testing
```

## IDE Helpers
A dev should have access to the autocomplete generated by [barryvdh/laravel-ide-helper](https://github.com/barryvdh/laravel-ide-helper).
Please make sure you have generated all the files before pushing the code as a Pull Request.

***Automatic PHPDoc generation for Laravel Models***
```bash
php artisan ide-helper:models 
```

***Automatic PHPDoc generation for Laravel Facades***
```bash
php artisan ide-helper:generate
```

***PhpStorm Meta for Container instances***
```bash
php artisan ide-helper:meta
```
